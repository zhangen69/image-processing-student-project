<div class="page-header">
  <h1>Image Processing Project</h1>
  <h3>Please select an image to continue:</h3>
  <input type="file" name="file" id="file" accept="image/x-png,image/gif,image/jpeg" (change)="onFileChanged($event)" #fileInput>
  <button type="button" class="btn-select" (click)="fileInput.click()">Select File</button>
  <button type="button" class="btn-select" (click)="onRevertUrl()" *ngIf="url && url !== originalUrl">Use Original</button>
  <select name="" id="" [(ngModel)]="selectedHistoryItem" (change)="onRevertUrl(selectedHistoryItem)">
    <option value="null">-- No History Yet --</option>
    <option [ngValue]="item" *ngFor="let item of history">{{ item.name }}</option>
  </select>
</div>
<div class="image-container">
  <div class="image-wrapper">
    <img [src]="url" id="uploadedImage" *ngIf="url" #imageOutput>
  </div>
  <div class="toolbars">
    <h3>Toolbars</h3>
    <div class="tool-item" (click)="selectTool('resize')" [ngClass]="{'active': selectedTool === 'resize'}">Resize</div>
    <div class="tool-item" (click)="selectTool('blur')" [ngClass]="{'active': selectedTool === 'blur'}">Blur</div>
    <div class="tool-item" (click)="selectTool('invert')" [ngClass]="{'active': selectedTool === 'invert'}">Invert</div>
    <div class="tool-item" (click)="selectTool('flip')" [ngClass]="{'active': selectedTool === 'flip'}">Flip</div>
    <!-- <div class="tool-item" (click)="selectTool('circle')" [ngClass]="{'active': selectedTool === 'circle'}">Circle</div> -->
    <div class="tool-item" (click)="selectTool('contrast')" [ngClass]="{'active': selectedTool === 'contrast'}">Contrast</div>
    <div class="tool-item" (click)="selectTool('greyscale')" [ngClass]="{'active': selectedTool === 'greyscale'}">Greyscale</div>
    <div class="tool-item" (click)="selectTool('opacity')" [ngClass]="{'active': selectedTool === 'opacity'}">Opacity</div>
    <div class="tool-item" (click)="selectTool('scale')" [ngClass]="{'active': selectedTool === 'scale'}">Scale</div>
    <div class="tool-item" (click)="selectTool('rotate')" [ngClass]="{'active': selectedTool === 'rotate'}">Rotate</div>
    <div class="tool-item" (click)="selectTool('printText')" [ngClass]="{'active': selectedTool === 'printText'}">Print Text</div>
    <div class="tool-item" (click)="selectTool('cover')" [ngClass]="{'active': selectedTool === 'cover'}">Set Cover</div>
  </div>
  <div class="options-container" *ngIf="selectedTool">
    <h3>Options</h3>
    <div class="option-wrapper" [ngSwitch]="selectedTool">
      <!-- printText -->
      <div class="resize-options" *ngSwitchCase="'printText'">
        <div class="form-group">
          <label for="text">Text</label>
          <input type="text" id="text" [(ngModel)]="formData.text">
        </div>
        <div class="form-group">
          <label for="fontSize">Font Size</label>
          <select name="fontSize" id="fontSize" [(ngModel)]="formData.fontSize">
            <option value="FONT_SANS_8">8</option>
            <option value="FONT_SANS_16">16</option>
            <option value="FONT_SANS_32">32</option>
            <option value="FONT_SANS_64">64</option>
            <option value="FONT_SANS_128">128</option>
          </select>
        </div>
        <div class="form-group">
          <label for="fontColor">Color</label>
          <select name="fontColor" id="fontColor" [(ngModel)]="formData.fontColor">
            <option value="BLACK">Black</option>
            <option value="WHITE">White</option>
          </select>
        </div>
        <div class="form-group">
          <label for="">Position X</label>
          <input type="number" [(ngModel)]="formData.positionX">
        </div>
        <div class="form-group">
          <label for="">Position Y</label>
          <input type="number" [(ngModel)]="formData.positionY">
        </div>
        <pre>Note: X and Y is the starting coordinate place the text</pre>
      </div>
      <!-- resize -->
      <div class="resize-options" *ngSwitchCase="'resize'">
        <div class="form-group">
          <label for="">Width</label>
          <input type="number" [(ngModel)]="formData.width">
        </div>
        <div class="form-group">
          <label for="">Height</label>
          <input type="number" [(ngModel)]="formData.height">
        </div>
      </div>
      <!-- cover -->
      <div class="resize-options" *ngSwitchCase="'cover'">
        <div class="form-group">
          <label for="">Width</label>
          <input type="number" [(ngModel)]="formData.width">
        </div>
        <div class="form-group">
          <label for="">Height</label>
          <input type="number" [(ngModel)]="formData.height">
        </div>
      </div>
      <!-- blur -->
      <div class="resize-options" *ngSwitchCase="'blur'">
        <div class="form-group">
          <label for="">Level</label>
          <input type="number" [(ngModel)]="formData.level">
        </div>
      </div>
      <!-- opacity -->
      <div class="resize-options" *ngSwitchCase="'opacity'">
        <div class="form-group">
          <label for="">Level</label>
          <input type="number" [(ngModel)]="formData.level">
        </div>
      </div>
      <!-- contrast -->
      <div class="resize-options" *ngSwitchCase="'contrast'">
        <div class="form-group">
          <label for="">Level</label>
          <input type="number" [(ngModel)]="formData.level">
        </div>
      </div>
      <!-- scale -->
      <div class="resize-options" *ngSwitchCase="'scale'">
        <div class="form-group">
          <label for="">Level</label>
          <input type="number" [(ngModel)]="formData.level">
        </div>
      </div>
      <!-- rotate -->
      <div class="resize-options" *ngSwitchCase="'rotate'">
        <div class="form-group">
          <label for="">Degree</label>
          <input type="number" [(ngModel)]="formData.degree">
        </div>
      </div>
      <!-- flip -->
      <div class="resize-options" *ngSwitchCase="'flip'">
        <div class="form-group">
          <label for="flipHorizontal" class="checkbox-group">
            <input type="checkbox" name="flipHorizontal" id="flipHorizontal" value="horizontal" [(ngModel)]="formData.flipHorizontal">
            <span>Flip Horizontal</span>
          </label>
        </div>
        <div class="form-group">
          <label for="flipVertical" class="checkbox-group">
            <input type="checkbox" name="flipVertical" id="flipVertical" value="horizontal" [(ngModel)]="formData.flipVertical">
            <span>Flip Vertical</span>
          </label>
        </div>
      </div>
    </div>
    <button type="button" class="btn-process" (click)="onSubmit(formData, selectedTool, url)" [disabled]="!url">Process</button>
  </div>
</div>
<div class="error" *ngIf="error">
  <pre>{{ error | json}}</pre>
</div>
